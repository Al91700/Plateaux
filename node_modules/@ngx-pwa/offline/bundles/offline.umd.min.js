!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/router","rxjs","rxjs/operators"],t):t((e.ngxPWA=e.ngxPWA||{},e.ngxPWA.offline=e.ngxPWA.offline||{}),e.ng.core,e.ng.common,e.ng.router,e.Rx,e.Rx.operators)}(this,function(e,t,n,r,i,a){"use strict";var c=new t.InjectionToken("offline-config-route-offline",{providedIn:"root",factory:function(){return"/offline"}}),u=new t.InjectionToken("offline-config-route-unavailable",{providedIn:"root",factory:function(){return"/unavailable"}}),o=new t.InjectionToken("offline-config-guards-redirect",{providedIn:"root",factory:function(){return!0}});var f=function(){function o(e,t,n,r){this.router=e,this.platformId=t,this.routeOffline=n,this.routeUnavailable=r,o.instance||(o.instance=this),this.initOnlineObservable()}return Object.defineProperty(o.prototype,"online",{get:function(){return!n.isPlatformBrowser(this.platformId)||navigator.onLine},enumerable:!0,configurable:!0}),o.catchOffline=function(){return a.catchError(o.catchCallback)},o.catchCallback=function(e,t){if(o.instance){if(o.instance.online){if(e.status&&500<=e.status&&e.status<600)return o.instance.router.navigate([o.instance.routeUnavailable]),i.empty();throw e}return o.instance.router.navigate([o.instance.routeOffline]),i.empty()}throw console.log("You need to import OfflineModule in your AppModule\n      AND to inject the Network service at least once, for example in your AppComponent constructor."),e},o.prototype.initOnlineObservable=function(){this.onlineChanges=n.isPlatformBrowser(this.platformId)?i.merge(a.startWith(this.online),i.fromEvent(document,"online").pipe(a.mapTo(!0)),i.fromEvent(document,"offline").pipe(a.mapTo(!1))):i.of(!0)},o.instance=null,o.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[{type:r.Router},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Inject,args:[c]}]},{type:void 0,decorators:[{type:t.Inject,args:[u]}]}]},o.ngInjectableDef=t.defineInjectable({factory:function(){return new o(t.inject(r.Router),t.inject(t.PLATFORM_ID),t.inject(c),t.inject(u))},token:o,providedIn:"root"}),o}(),s=f.catchOffline,l=function(){function e(e,t,n,r){this.router=e,this.network=t,this.routeOffline=n,this.guardsRedirect=r}return e.prototype.canActivate=function(){return this.guard()},e.prototype.canActivateChild=function(){return this.guard()},e.prototype.canLoad=function(){return this.guard()},e.prototype.guard=function(){return!!this.network.online||(this.guardsRedirect&&this.router.navigate([this.routeOffline]),!1)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.Router},{type:f},{type:void 0,decorators:[{type:t.Inject,args:[c]}]},{type:void 0,decorators:[{type:t.Inject,args:[o]}]}]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(r.Router),t.inject(f),t.inject(c),t.inject(o))},token:e,providedIn:"root"}),e}();e.offlineProviders=function(e){return[e.routeOffline?{provide:c,useValue:e.routeOffline}:[],e.routeUnavailable?{provide:u,useValue:e.routeUnavailable}:[],!1===e.guardsRedirect?{provide:o,useValue:!1}:[]]},e.OFFLINE_GUARDS_REDIRECT=o,e.OFFLINE_ROUTE_OFFLINE=c,e.OFFLINE_ROUTE_UNAVAILABLE=u,e.Network=f,e.catchOffline=s,e.OnlineGuard=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=offline.umd.min.js.map
